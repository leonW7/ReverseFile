<?lua
require "teamf1lualib/igmpSnooping_bl"
local igmpSnoopBl = require("com.teamf1.bl.network.igmpSnooping")
local inputCookie = cgi["configRowId"]

if (ButtonType and ButtonType == "edit") then
    returnCode, cookie, vlanId, participationPortVlans, portsTable=  
                        igmpSnoopBl.igmpSnoopingPortSectionGetCur (inputCookie) 
end 

cgilua.header ("Content-Type","text/html; charset=UTF-8")
?>
<div id="tf1_igmpSnoopingDailogContent">
    <div class="topBg">
        <h1 data-localize="14389">IGMP Snooping Configuration</h1>
        <close>
            <a href="#" id="btnClose" title="Close">X</a>
        </close>
    </div>
    <div class="dialogMidArea">
        <div align="left">
            <div class="configRow" id="tf1_vlanId_div">
                <label data-localize="13274">Vlan ID</label><p>$| vlanId |$</p>
                <input type="hidden" size="30" name="igmpSnooping.vlanId" value="$| vlanId |$" id="tf1_vlanId">
            </div>
            <div class="break" id="break_vlanId">&nbsp;</div>
            <h2 data-localize="14390">IGMP Port Membership Configuration</h2>
            <div class="configRow" id="tf1_igmpMembership_div">
                <label data-localize="14387">Port Membership</label>
                <select name="tf1_igmpMembers" id="tf1_igmpMembers" multiple class="multiTwo">
                <?lua 
                   for u,v in pairs(portsTable) do
                ?>
                <option $| web.multiDropDownSelected(participationPortVlans, v) |$ value="$| v |$">$| v |$</option>
                <?lua end?>
                </select>
            </div>
            <div class="break" id="break_igmpMembership">&nbsp;</div>
        </div>
    </div>
    <div class="dialogSubmitRow">
        <input type="hidden" name="igmpSnooping.cookie" value="$| cgi["configRowId"] |$">
        <input data-localize="12758" type="submit" name="button.config1.igmpSnooping.igmpSnooping.$| configRowId |$" class="btnSubmit" title="Save" value="Save" id="btSave">
    </div>
</div>
<!-- Section for Pop up dialog ends -->
