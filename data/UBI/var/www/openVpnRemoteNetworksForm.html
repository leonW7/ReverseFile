<?lua
require "teamf1lualib/openVpnRemoteNetworks_bl"
require "teamf1lualib/errorMap"
require "teamf1lualib/returnCodes"

local remotenetworks = 
    require("com.teamf1.bl.vpn.openvpnRemoteNetworks")
local errorMap    = require ("com.teamf1.core.errorMap")
local returnCodes = require ("com.teamf1.core.returnCodes")

if(ButtonType == "add" or ButtonType == "edit") then
    local returnCode, commonName, network, subnetmask
    if (ButtonType and ButtonType == "edit") then
        configRowId = cgi["configRowId"]
        returnCode, commonName, network, subnetmask = 
            remotenetworks.openVpnRemoteNetworksSectionGetCur(configRowId)
        if (returnCode == returnCodes.SUCCESS) then
            statusSuccessMessage = errorMap.errorStringGet (returnCode)
        else 
            statusErrorMessage = errorMap.errorStringGet (returnCode)
	end
    else
        configRowId = "-1"
    end
cgilua.header ("Content-Type","text/html; charset=UTF-8")
?>
<div id="tf1_openVpnRemoteNetworksDailogContent">
    <div class="topBg">
        <h1 data-localize="11826">OpenVPN Remote Network Configuration</h1>
                    <close>
                        <a href="#" id="btnClose" title="Close">X</a>
                    </close>
                </div>
    <div class="dialogMidArea">
        <div class="configRow">
            <label data-localize="10546">Common Name </label>
            <input type="text" name="openVpnRemoteNetworks.remoteNetworkname"
            value = "$| commonName or '' |$" id="tf1_txtCommonName" maxlength="15"> </div>
        <div class="break">
&nbsp; </div>
        <div class="configRow">
            <label data-localize="12670">Remote Network </label>
            <input type="text" id="tf1_txtRemoteNetwork" name="openVpnRemoteNetworks.remoteNetwork" value = "$| network or '' |$" maxlength="15" onkeypress="return numericValueCheck (event, '.')" onkeydown="if (event.keyCode == 9) { return ipv4AddrValidate (this, 'SN', false, true, LANG_LOCALE['11281'], LANG_LOCALE['11031'], true); }">
        </div>
        <div class="break">
&nbsp; </div>
        <div class="configRow">
            <label data-localize="13017">Subnet Mask </label>
            <input type="text" name="openVpnRemoteNetworks.remoteNetworkMask" value = "$| subnetmask or '' |$" id="tf1_txtSnetMask" maxlength="15" onkeypress="return numericValueCheck (event, '.')" onkeydown="if (event.keyCode == 9) { return validNetMask ('txtSnetMask')}">
        </div>
        <div class="break">
&nbsp; </div>
    </div>
    <div class="dialogSubmitRow">
        <input data-localize="12758" type="submit" name="button.config.openVpnRemoteNetworks.openVpnRemoteNetworks.$| configRowId |$" onclick="return openVpnRemoteNetworksValidate ()" class="btnSubmit" title="Save" value="Save" id="btSave">
    </div>
</div>

<?lua end?>
