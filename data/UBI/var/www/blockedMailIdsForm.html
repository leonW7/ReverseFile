<?lua
require "teamf1lualib/blockedMailIds_bl"
require "teamf1lualib/errorMap"
require "teamf1lualib/returnCodes"

local blockedMailids = require("com.teamf1.bl.blockedMailIdList")
local errorMap    = require ("com.teamf1.core.errorMap")
local returnCodes = require ("com.teamf1.core.returnCodes")

if(ButtonType == "add" or ButtonType == "edit") then
    local returnCode, mailId
    if (ButtonType and ButtonType == "edit") then
        configRowId = cgi["configRowId"]
        returnCode, mailId = blockedMailids.blockedMailIdsSectionGetCur(configRowId)
        if (returnCode == returnCodes.SUCCESS) then
            statusSuccessMessage = errorMap.errorStringGet (returnCode)
        else 
            statusErrorMessage = errorMap.errorStringGet (returnCode)
	end
    else
        configRowId = "-1"
    end
cgilua.header ("Content-Type","text/html; charset=UTF-8")
?>
<div id="tf1_blockedMailIdsDailogContent">
                <div class="topBg">
                    <h1 data-localize="10406">Blocked Mail IDs Configuration</h1>
                    <close>
                        <a href="#" id="btnClose" title="Close">X</a>
                    </close>
                </div>
                <div class="dialogMidArea">
                    <div class="configRow">
                        <label data-localize="11652"> Mail ID </label>
                        <input type="text" id="tf1_blockedMail"
                        name="blockedMailIds.blockedMailId" value="$| mailId or '' |$" maxlength="64">
                    </div>
                    <div class="break">
                        &nbsp;
                    </div>
                </div>
                <div class="dialogSubmitRow">
                    <input data-localize="12758" type="submit"
                    name="button.config.blockedMailIds.blockedMailIds.$| configRowId |$" onclick="return blockedMailIdsValidate()" class="btnSubmit" title="Save" value="Save" id="btSave">
                </div>
            </div>
<?lua end?>
