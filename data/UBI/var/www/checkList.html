<?lua 
	require "teamf1lualib/deviceInfo_bl"
    require "teamf1lualib/errorMap"
    require "teamf1lualib/returnCodes"

	local deviceInfo = require("com.teamf1.bl.system.deviceInfo")
	local errorMap    = require ("com.teamf1.core.errorMap")
	local returnCodes = require ("com.teamf1.core.returnCodes")
	local returnCode, firmwareVersion, firmwareDate, checkSum, kernelVersion, factMsg,queryUrl, regionInfo,ssid,wlanMac,wlanDomain, lanMacAddr, lanMac, wan1Mac, wan2Mac, dmzMac, configurablePort

	returnCode, firmwareVersion, firmwareDate, checkSum,
        kernelVersion, factMsg, modelId, queryUrl, regionInfo,
	ssid, wlanMac, wlanDomain, lanMacAddr, lanMac, wan1Mac, wan2Mac, dmzMac, configurablePort = deviceInfo.checkListFirmwareInfoGet ()

	local wlanDomain = ""
	local ssidDisp = ""
	if(UNIT_NAME == "DSR-1000N" or UNIT_NAME == "DSR-500N" or UNIT_NAME == "DSR-250N" or UNIT_NAME == "DSR-150N"
		 or PRODUCT_ID == "DSR-500AC_Ax" or PRODUCT_ID == "DSR-1000AC_Ax") then
		wlanDomain = string.sub(wlanMac,1,#wlanMac - 2) or ''
		ssidDisp = string.sub(ssid,1,#ssid - 2) or ''
    else
        wlanDomain = 'Not Available'
		ssidDisp   = 'Not Available'
    end
LANG_LOCALE =
"30001,10937,11545,11013,10494,10665,11703,30492,30493,11492,11533,30494,12918,30495,30496,30497,12691,30498,30499,30075,10333"
?>
<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Language" content="en-us">
		<title>$|COMPANY_NAME|$ : $|APP_NAME|$</title>
<!--
Copyright (c) 2012 - 2013 TeamF1, Inc. (www.TeamF1.com)
copyright (c) 2008-2015, TeamF1 Networks Pvt. Ltd. 
(Subsidiary of D-Link India)
All rights reserved.
-->
		<link rel="shortcut icon" href="images/favicon.png" type="image/x-icon" />
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		<link rel="stylesheet" type="text/css" href="css/style.css" />
		<link rel="stylesheet" type="text/css" href="css/buttons.css" />
		<link rel="stylesheet" type="text/css" href="css/menu.css" />
        	<?lua web.includeMenu("metaInclude.html")
		web.includeMenu("dictionary.html")
		?>
		<script type="text/javascript" language="javascript" src="js/jquery-1.8.0.min.js"></script>
		<script language="javascript" src="js/checkList.js" type ="text/javascript"></script>
        <?lua if (PRODUCT_ID ~= "DSR-1000AC_Ax" and PRODUCT_ID ~= "DSR-500AC_Ax") then ?>
        <script language="JavaScript" src="js/wlNwData.js" type="text/javascript"></script>
        <?lua else ?>
        <script language="JavaScript" src="js/wlNwDataAC.js" type="text/javascript"></script>
        <?lua end ?>
 	</head>
	<body onload="checkListInit ()">
		<table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
		<td class="header" valign="top" align="center">
		<div align="center">
  		 <div class="midWidth">
      		 <div class="logo FL">
           	 $| LANG_LOCALE['30001'] |$ - $| UNIT_NAME |$ </div>
       		 <div class="FR headerRight">
       		 <table border="0" cellpadding="0" cellspacing="0">
				
				        <tr>
					        <td valign="top">
					        <h5 class="FR">$| LANG_LOCALE['10937'] |$</h5>
					        <h4 class="FR divider">$| LANG_LOCALE['11545'] |$:</h4>
					        <h5 class="FR">$| firmwareVersion or ''|$</h5>
					        <h4 class="FR ">$| LANG_LOCALE['11013'] |$:</h4>
					        </td>

					        </tr>
	        </table>
	        </div>

                <div class="midWidth menuBg">
                    <div>
                        <div>
                            <div align="center">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
				</td>	
		</tr>
			<tr>
				<td valign="top" align="center">
				<div class="midWidth">
					<div class="FL2"> &nbsp;</div>
					<h1>$| LANG_LOCALE['10494'] |$</h1>
					<div class="midArea">
						<div align="left">
								<div class="configRow">
									<label> $| LANG_LOCALE['11013'] |$ </label>
									  <p>$| firmwareVersion or '' |$</p>
								</div>
								<div class="break">
									&nbsp;
								</div>
								<div class="configRow">
									<label> $| LANG_LOCALE['10665'] |$ </label>
					      <?lua 	firmTime = string.gsub (firmwareDate, "  ", " ")
                                                table = util.split (firmTime," ") ?>
									 <p>$| table[5]..",".." "..table[2]..",".." "..table[3]  |$</p>								
								</div>
								<div class="break">
									&nbsp;
								</div>
								<div class="configRow">
									<label> $| LANG_LOCALE['11703'] |$ </label>
									 <p>$|"0x"..checkSum or '' |$</p>
								</div>
								<div class="break">
									&nbsp;
								</div>
								<div class="configRow">
									<label>$| LANG_LOCALE['30492'] |$</label>
									 <p id="tf1_wlanVal"></p>
								</div>
								<div class="break">
									&nbsp;
								</div>
								 <div class="configRow">
        	                                                       <label> $| LANG_LOCALE['30493'] |$ </label>
                                                                         <p>https://$|queryUrl|$/firmware/query.asp?<br>model=$|modelId or ''|$&MAC=$| lanMacAddr or '' |$</p>
                                                                </div>
                                                                <div class="break">
                                                                        &nbsp;
                                                                </div>
                	                                         <div class="configRow">
                        	                                            <label>$| LANG_LOCALE['11492'] |$</label>
                                	                                     <p>$| kernelVersion or '' |$</p>
                                                                </div>
                                                                <div class="break">
                                                                        &nbsp;
                                                                </div>
								<div class="configRow">
                                        	        	                <label>
                                                                            $| LANG_LOCALE['11533'] |$ </label>
                                                                		 <p>$| lanMac or ''|$</p>
                                                                </div>
                                                                <div class="break">
                                                                        &nbsp;
                                                                </div>
                                                        	<div class="configRow">
                                                                		<label>$| LANG_LOCALE['30494'] |$</label>
                                                                 		<p>$| wlanDomain or '' |$</p>
                                                                </div>
                                                                <div class="break">
                                                                        &nbsp;
                                                                </div>

                                                        	<div class="configRow">
									<label>$| LANG_LOCALE['12918'] |$ </label>
									 <p>$| ssidDisp or '' |$</p>
								</div>
								<div class="break">
									&nbsp;
								</div>
								<div class="configRow">
									<label> $| LANG_LOCALE['30495'] |$ </label>
									 <p>$| wan1Mac or '' |$</p>
								</div>
								<div class="break">
									&nbsp;
								</div>
								<div class="configRow">
								<?lua
                                if (UNIT_NAME ~= "DSR-250N" and UNIT_NAME ~= "DSR-250" and UNIT_NAME ~= "DSR-150N" and UNIT_NAME ~= "DSR-150") then
                                    if (configurablePort == "WAN2") then
								?>
									<label>$| LANG_LOCALE['30496'] |$<br>$| LANG_LOCALE['11636'] |$</label>
									<p>$| wan2Mac or '' |$</p>
								<?lua else ?>	
									<label>$| LANG_LOCALE['30497'] |$<br>$| LANG_LOCALE['11636'] |$</label>
									<p>$| dmzMac or '' |$</p>
								<?lua end end ?>	
								</div>
								<div class="break">
									&nbsp;
								</div>
								<div class="configRow">
									<label>$| LANG_LOCALE['12691'] |$</label>
									<p>$| factMsg or '' |$</p>
								</div>
                                				<div class="break">
									&nbsp;
								</div>
							<?lua if(PRODUCT_ID == "DSR-500AC_Ax" or PRODUCT_ID
                            == "DSR-1000AC_Ax" or UNIT_NAME == "DSR-500N" or UNIT_NAME == "DSR-250N" or UNIT_NAME == "DSR-150N") then ?>
								<div class="configRow">
									<label>$| LANG_LOCALE['30498'] |$</label>
									<p id ="tf1_tdChanList"></p>
 								</div>
								<div class="break">
									&nbsp;
								</div>
							<?lua end ?>
						</div>
					</div>
				</div></td>
			</tr>
 			<input type="hidden" id="hdRegionInfo" value="$|regionInfo|$">
			<input type="hidden" id="hdWlanCountry" value="US">                       
			<input type="hidden" id="hdUnitName" value="$| UNIT_NAME or '' |$">                       
			<input type="hidden" id="hdProductId" value="$| PRODUCT_ID or '' |$">                       
			<tr>
				<td><?lua web.includeMenu("footer.html")?></td>
			</tr>
		</table>
	</body>
</html>
