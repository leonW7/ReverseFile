<?lua
require "teamf1lualib/blockedClients_bl"
require "teamf1lualib/errorMap"
require "teamf1lualib/returnCodes"

local clients = require("com.teamf1.bl.vlan.captiveportalblockedclients")
local errorMap    = require ("com.teamf1.core.errorMap")
local returnCodes = require ("com.teamf1.core.returnCodes")

if(ButtonType == "add" or ButtonType == "edit") then
    local returnCode, macAddress, description
    if (ButtonType and ButtonType == "edit") then
        configRowId = cgi["configRowId"]
        returnCode, macAddress, description = 
                clients.blockedClientsSectionGetCur(configRowId)
        if (returnCode == returnCodes.SUCCESS) then
            statusSuccessMessage = errorMap.errorStringGet (returnCode)
        else 
            statusErrorMessage = errorMap.errorStringGet (returnCode)
	end
    else
        configRowId = "-1"
    end
cgilua.header ("Content-Type","text/html; charset=UTF-8")
?>
<div id="tf1_blockedClientsDailogContent">
                <div class="topBg">
                    <h1 data-localize="10404">Blocked MAC Profile Configuration</h1>
                    <close>
                        <a href="#" id="btnClose" title="Close">X</a>
                    </close>
                </div>
                <div class="dialogMidArea">
                    <div class="configRow">
                        <label data-localize="11636"> MAC Address </label>
                        <input type="text" maxlength="17" id="tf1_macAddr" name="blockedClients.macAddress" value ="$| macAddress or '' |$" onKeyPress="return numericValueCheck (event,'abcdefABCDEF:')" onKeyDown="return macAddrVerify (event, this, true, LANG_LOCALE['11295']+':', '')">
                    </div>
                    <div class="break">
                        &nbsp;
                    </div>
                    <div class="configRow">
                        <label data-localize="10702"> Description </label>
                        <input type="text" name="blockedClients.description" value ="$| description or '' |$" id="tf1_description" maxlength='64'>
                    </div>
                    <div class="break">
                        &nbsp;
                    </div>
                </div>
                <div class="dialogSubmitRow">
                    <input data-localize="12758" type="submit" 
                    name="button.config.blockedClients.blockedClients.$| configRowId |$"
                    onclick="return pageValidate()" class="btnSubmit" title="Save" value="Save" id="btSave">
                </div>
            </div>
<?lua end?>
